<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ | CyberLearn</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- âœ… Ù…ÙƒØªØ¨Ø§Øª ØªØµØ¯ÙŠØ± PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <style>
    /* =========================================
       ğŸ¨ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„ØªØµÙ…ÙŠÙ…
       ========================================= */
    :root {
      --primary-color: #00e5ff;
      --secondary-color: #d4af37;
      --success-color: #00c853;
      --danger-color: #ff5252;
      --dark-bg: rgba(0, 0, 0, 0.85);
      --card-bg: rgba(0, 0, 0, 0.6);
      --text-primary: #f5f5f5;
      --text-secondary: #ccc;
      --shadow-neon: 0 0 20px rgba(0, 229, 255, 0.3);
    }

    /* =========================================
       ğŸŒ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
       ========================================= */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color: var(--text-primary);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      padding-top: 90px;
      overflow-x: hidden;
      line-height: 1.6;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* =========================================
       ğŸ“± ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¹Ø§Ù…Ø© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
       ========================================= */
    @media (max-width: 768px) {
      body {
        padding-top: 120px;
        font-size: 14px;
      }
    }

    /* =========================================
       ğŸ” Navbar - Ù…ØªØ¬Ø§ÙˆØ¨
       ========================================= */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(10px);
      padding: 15px 30px;
      z-index: 1000;
      box-shadow: var(--shadow-neon);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .navbar-brand {
      font-size: 1.4em;
      font-weight: bold;
      color: var(--primary-color);
      text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
      white-space: nowrap;
    }

    .navbar-right {
      display: flex;
      align-items: center;
      gap: 20px;
      flex: 1;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .navbar-user {
      font-size: 1.1em;
      color: var(--primary-color);
      white-space: nowrap;
      background: rgba(0, 229, 255, 0.1);
      padding: 8px 15px;
      border-radius: 25px;
      border: 1px solid rgba(0, 229, 255, 0.3);
    }

    .navbar-progress {
      min-width: 200px;
      max-width: 300px;
      flex: 1;
    }

    .navbar-progress .progress-bar {
      height: 20px;
      margin: 0;
    }

    .navbar-logout {
      background: linear-gradient(45deg, var(--danger-color), #d32f2f);
      color: #fff;
      padding: 8px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      white-space: nowrap;
      transition: all 0.3s;
    }

    .navbar-logout:hover {
      background: linear-gradient(45deg, #d32f2f, #b71c1c);
      transform: translateY(-2px);
    }

    /* ğŸ“± Navbar - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 768px) {
      .navbar {
        padding: 10px 15px;
        flex-direction: column;
        align-items: stretch;
      }

      .navbar-right {
        justify-content: center;
        margin-top: 10px;
        gap: 10px;
      }

      .navbar-progress {
        min-width: 100%;
        max-width: 100%;
        order: 3;
        margin-top: 10px;
      }

      .navbar-brand {
        font-size: 1.2em;
        text-align: center;
      }

      .navbar-user {
        font-size: 0.95em;
        padding: 6px 10px;
      }

      .navbar-logout {
        padding: 6px 15px;
        font-size: 0.95em;
      }
    }

    /* =========================================
       ğŸ“¦ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
       ========================================= */
    .dashboard-container {
      background: var(--dark-bg);
      border-radius: 15px;
      box-shadow: var(--shadow-neon);
      padding: 30px;
      width: 90%;
      max-width: 900px;
      margin: 20px auto;
      transition: all 0.4s ease;
      backdrop-filter: blur(5px);
    }

    /* ğŸ“± Ø­Ø§ÙˆÙŠØ§Øª - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      .dashboard-container {
        width: 95% !important;
        padding: 20px 15px !important;
      }
    }

    /* =========================================
       ğŸ“ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„Ù†ØµÙˆØµ
       ========================================= */
    h1 {
      font-size: 2em;
      margin-bottom: 20px;
      color: var(--primary-color);
      text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
      text-align: center;
    }

    h2 {
      font-size: 1.8em;
      margin-bottom: 20px;
      color: var(--primary-color);
      text-align: center;
    }

    /* ğŸ“± Ø¹Ù†Ø§ÙˆÙŠÙ† - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      h1 {
        font-size: 1.5em !important;
      }

      h2 {
        font-size: 1.3em !important;
      }
    }

    /* =========================================
       ğŸ¥ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª - Ù…ØªØ¬Ø§ÙˆØ¨Ø©
       ========================================= */
    .video-section {
      border-radius: 12px;
      overflow: hidden;
      margin: 20px auto;
      box-shadow: 0 0 15px rgba(0, 255, 200, 0.4);
    }

    .video-section video {
      width: 100%;
      height: 500px;
      display: block;
      object-fit: cover;
    }

    /* ğŸ“± ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      .video-section video {
        height: 250px !important;
      }
    }

    @media (min-width: 481px) and (max-width: 768px) {
      .video-section video {
        height: 350px !important;
      }
    }

    /* =========================================
       ğŸ“‹ ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… - Grid Ù…ØªØ¬Ø§ÙˆØ¨
       ========================================= */
    .how-to-use-section {
      background: linear-gradient(135deg, rgba(0, 229, 255, 0.1), rgba(0, 200, 200, 0.1));
      border: 2px solid var(--primary-color);
      border-radius: 15px;
      padding: 25px;
      margin: 20px auto;
      max-width: 900px;
    }

    .instructions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .instruction-card {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 10px;
      border: 1px solid rgba(0, 229, 255, 0.3);
      transition: transform 0.3s ease;
    }

    .instruction-card:hover {
      transform: translateY(-5px);
      border-color: rgba(0, 229, 255, 0.6);
    }

    .instruction-number {
      background: linear-gradient(45deg, var(--success-color), var(--primary-color));
      color: #000;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .instruction-card h3 {
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .progress-message {
      color: #ffeb3b;
      font-size: 15px;
      margin: 10px 0;
      min-height: 25px;
      width: 100%;
      text-align: center;
    }

    /* ğŸ“± Grid - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      .instructions-grid {
        grid-template-columns: 1fr !important;
        gap: 15px;
      }
    }

    /* =========================================
       ğŸ“ Ø§Ù„Ø¯Ø±ÙˆØ³ - Ù…ØªØ¬Ø§ÙˆØ¨Ø©
       ========================================= */
    .lesson-section {
      margin: 20px auto;
    }

    .intro-text {
      font-size: 17px;
      line-height: 1.7;
      color: #e8f8ff;
      text-align: justify;
      margin: 15px 0;
    }

    .lesson-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin-top: 25px;
    }

    /* ğŸ“± Ø¯Ø±ÙˆØ³ - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      .intro-text {
        font-size: 15px;
      }
    }

    /* =========================================
       ğŸ”˜ Ø§Ù„Ø£Ø²Ø±Ø§Ø± - Ù…ØªØ¬Ø§ÙˆØ¨Ø©
       ========================================= */
    button, .btn-blue, .btn-green, .btn-gray {
      display: inline-block;
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      font-weight: bold;
      min-width: 150px;
      text-align: center;
    }

    .btn-green {
      background: linear-gradient(45deg, var(--success-color), #009624);
      color: #fff;
    }

    .btn-green:hover {
      background: linear-gradient(45deg, #009624, #007a1e);
      transform: translateY(-2px);
    }

    .btn-blue {
      background: linear-gradient(45deg, #2196f3, #1976d2);
      color: #fff;
    }

    .btn-gray {
      background: linear-gradient(45deg, #757575, #616161);
      color: #fff;
    }

    .locked {
      opacity: 0.5;
      cursor: not-allowed !important;
      filter: grayscale(1);
    }

    /* ğŸ“± Ø£Ø²Ø±Ø§Ø± - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      button, .btn-blue, .btn-green, .btn-gray {
        min-width: 200px !important;
        padding: 15px 20px !important;
        font-size: 18px !important;
      }
    }

    /* =========================================
       ğŸ“Š Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
       ========================================= */
    .progress-bar-container {
      padding: 10px;
    }

    .progress-bar {
      width: 100%;
      height: 25px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--success-color), var(--primary-color));
      width: 0%;
      transition: width 0.5s ease;
      border-radius: 15px;
    }

    .progress-text {
      font-size: 14px;
      color: var(--primary-color);
      margin-top: 5px;
      text-align: center;
    }

    /* =========================================
       ğŸ† Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ± - Ù…ØªØ¬Ø§ÙˆØ¨Ø©
       ========================================= */
    .certificate-showcase {
      display: none;
      text-align: center;
      padding: 20px;
      background: rgba(0, 0, 0, 0.95);
      border-radius: 15px;
      margin: 20px auto;
      max-width: 850px;
      border: 3px solid var(--secondary-color);
      box-shadow: 0 0 40px rgba(212, 175, 55, 0.4);
    }

    .certificate-showcase.active {
      display: block;
    }

    .certificate-preview {
      width: 100%;
      max-width: 800px;
      height: 600px;
      margin: 20px auto;
      border: 5px solid var(--secondary-color);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(212, 175, 55, 0.6);
    }

    .download-cert-btn {
      background: linear-gradient(45deg, var(--secondary-color), #b89730);
      color: #000;
      padding: 15px 40px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      margin-top: 20px;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
    }

    .download-cert-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 20px rgba(212, 175, 55, 0.7);
    }

    /* ğŸ“± Ø´Ù‡Ø§Ø¯Ø© - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      .certificate-preview {
        height: 400px !important;
        border-width: 3px;
      }

      .download-cert-btn {
        padding: 12px 25px;
        font-size: 16px;
      }
    }

    @media (min-width: 481px) and (max-width: 768px) {
      .certificate-preview {
        height: 500px !important;
      }
    }

    /* =========================================
       â¹ï¸ Utility Classes
       ========================================= */
    .hidden {
      display: none !important;
    }

    /* =========================================
       ğŸ”„ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù€ iFrames
       ========================================= */
    .lesson-buttons iframe {
      width: 100% !important;
      max-width: 100% !important;
      border-radius: 8px;
      border: 1px solid rgba(0, 229, 255, 0.3);
    }

    /* ğŸ“± iFrames - Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      .lesson-buttons iframe {
        height: 300px !important;
      }
    }

    @media (min-width: 481px) and (max-width: 768px) {
      .lesson-buttons iframe {
        height: 400px !important;
      }
    }
  </style>
</head>
<body>

  <!-- ====== Navbar ====== -->
  <nav class="navbar">
    <div class="navbar-brand">ğŸ”’ Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</div>
    <div class="navbar-right">
      <div class="navbar-progress progress-bar-container">
        <div class="progress-bar">
          <div class="progress-fill" id="navbarProgressFill"></div>
        </div>
        <div class="progress-text" id="navbarProgressText">0%</div>
      </div>
      <div class="navbar-user" id="navbarUserName">ğŸ‘¤ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      <button class="navbar-logout" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </nav>

  <!-- ====== Ù‚Ø³Ù… ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ====== -->
  <div class="dashboard-container how-to-use-section" id="howToUseSection">
    <h2>ğŸ“– ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰</h2>
    <div class="instructions-grid">
      <div class="instruction-card">
        <div class="instruction-number">1</div>
        <h3>Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©</h3>
        <p>Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ"</p>
      </div>
      <div class="instruction-card">
        <div class="instruction-number">2</div>
        <h3>ØªØ§Ø¨Ø¹ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø¨Ø§Ù„ØªØ³Ù„Ø³Ù„</h3>
        <p>Ø£ÙƒÙ…Ù„ ÙƒÙ„ Ø¯Ø±Ø³ (ÙÙŠØ¯ÙŠÙˆ + Ø§Ø®ØªØ¨Ø§Ø±) Ø«Ù… Ø§Ø¶ØºØ· "Ø§Ù„ØªØ§Ù„ÙŠ"</p>
      </div>
      <div class="instruction-card">
        <div class="instruction-number">3</div>
        <h3>Ø£ÙƒÙ…Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h3>
        <p>ÙŠØ¬Ø¨ Ø¥Ø¬ØªÙŠØ§Ø² ÙƒÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ù„ÙØªØ­ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ</p>
      </div>
      <div class="instruction-card">
        <div class="instruction-number">4</div>
        <h3>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯ØªÙƒ</h3>
        <p>Ø¨Ø¹Ø¯ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±ÙˆØ³ ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</p>
      </div>
    </div>
  </div>

  <!-- ğŸ¯ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© -->
  <div class="dashboard-container" id="introSection">
    <h1>Ù…Ù‚Ø¯Ù…Ø© Ø¹Ù† Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</h1>
    <div class="video-section">
      <video src="videos/intro.mp4" controls autoplay muted></video>
    </div>
    <p class="intro-text">
      ÙŠØ´Ù‡Ø¯ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ù…Ø¹Ø§ØµØ± ØªØ·ÙˆØ±Ù‹Ø§ Ø±Ù‚Ù…ÙŠÙ‹Ø§ Ù…ØªØ³Ø§Ø±Ø¹Ù‹Ø§ Ø´Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ø­ÙŠØ§Ø©ØŒ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙˆØ§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø¬Ø²Ø¡Ù‹Ø§ Ø£Ø³Ø§Ø³ÙŠÙ‹Ø§ Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù„Ù„Ø£ÙØ±Ø§Ø¯ ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø§Øª ÙˆØ§Ù„Ø¯ÙˆÙ„...
    </p>
    <div class="buttons">
      <button id="nextToLesson1" class="btn-green">Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ ğŸš€</button>
    </div>
  </div>

  <!-- ğŸ“š Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„ -->
  <div class="dashboard-container hidden lesson-section" id="lesson1Section">
    <h1>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</h1>
    <div class="video-section"><video src="videos/v_lesson1.mp4" controls></video></div>
    <p class="intro-text">ÙŠÙ‡Ø¯Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù‰ Ù…Ø¹Ø±ÙØ© ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØŒ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙÙŠÙ‡ØŒ Ø§Ù„Ø£Ù‡Ù…ÙŠØ©ØŒ ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù</p>
    <div class="lesson-buttons">
      <a href="lessons/lesson1.pdf" download class="btn-blue">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>
      <!-- âš ï¸ iframe Ø®Ø§Ø±Ø¬ÙŠ - Ù…Ù…ÙƒÙ† ÙŠØ¸Ù‡Ø± 401 error Ø¨Ø³ Ù…Ø´ Ù…Ø¤Ø«Ø± -->
      <iframe src="https://wayground.com/embed/quiz/6917139c1b458ed3e6c0852e" frameborder="0"></iframe>
      <div class="progress-message"></div>
      <button class="btn-green complete-quiz-btn" data-lesson="1">âœ… Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      <button class="btn-green next-btn locked" data-lesson="1">Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
    </div>
  </div>

  <!-- ğŸ“š Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ -->
  <div class="dashboard-container hidden lesson-section" id="lesson2Section">
    <h1>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ: ØªÙ‡Ø¯ÙŠØ¯Ø§Øª ÙˆØ³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ©</h1>
    <div class="video-section"><video src="videos/v_lesson2.mp4" controls></video></div>
    <p class="intro-text">ÙÙŠ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„ ØªØ¹Ø±Ù‘ÙÙ†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ...</p>
    <div class="lesson-buttons">
      <a href="lessons/lesson2.pdf" download class="btn-blue">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>
      <iframe src="https://wayground.com/embed/quiz/69171991d94edf084cce51f5" frameborder="0"></iframe>
      <div class="progress-message"></div>
      <button class="btn-green complete-quiz-btn" data-lesson="2">âœ… Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      <button class="btn-green next-btn locked" data-lesson="2">Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
      <button class="btn-gray prev-btn" data-prev="1">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>

  <!-- ğŸ“š Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø«Ø§Ù„Ø« -->
  <div class="dashboard-container hidden lesson-section" id="lesson3Section">
    <h1>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø«Ø§Ù„Ø«: Ø£Ø¯ÙˆØ§Øª ÙˆØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ©</h1>
    <div class="video-section"><video src="videos/v_lesson3.mp4" controls></video></div>
    <p class="intro-text">Ø¨Ø¹Ø¯ Ø£Ù† ØªØ¹Ø±Ù‘ÙÙ†Ø§ ÙÙŠ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¹Ù„Ù‰ Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ...</p>
    <div class="lesson-buttons">
      <a href="lessons/lesson3.pdf" download class="btn-blue">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>
      <iframe src="https://wayground.com/embed/quiz/69171dacdb88974d7b726bf2" frameborder="0"></iframe>
      <div class="progress-message"></div>
      <button class="btn-green complete-quiz-btn" data-lesson="3">âœ… Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      <button class="btn-green next-btn locked" data-lesson="3">Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
      <button class="btn-gray prev-btn" data-prev="2">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>

  <!-- ğŸ“š Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø±Ø§Ø¨Ø¹ -->
  <div class="dashboard-container hidden lesson-section" id="lesson4Section">
    <h1>ğŸ’» Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø±Ø§Ø¨Ø¹: Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ ÙÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h1>
    <div class="video-section"><video src="videos/v_lesson4.mp4" controls></video></div>
    <p class="intro-text">Ù…Ø¹ Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„ÙƒØ¨ÙŠØ± Ù†Ø­Ùˆ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŒ Ø£ØµØ¨Ø­ Ù…Ù† Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ...</p>
    <div class="lesson-buttons">
      <a href="lessons/lesson4.pdf" download class="btn-blue">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>
      <iframe src="https://wayground.com/embed/quiz/6917213134f10144ac27c377" frameborder="0"></iframe>
      <div class="progress-message"></div>
      <button class="btn-green complete-quiz-btn" data-lesson="4">âœ… Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      <button class="btn-green next-btn locked" data-lesson="4">Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
      <button class="btn-gray prev-btn" data-prev="3">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>

  <!-- ğŸ“š Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø®Ø§Ù…Ø³ -->
  <div class="dashboard-container hidden lesson-section" id="lesson5Section">
    <h1>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø®Ø§Ù…Ø³: ØªÙ†Ù…ÙŠØ© Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</h1>
    <div class="video-section"><video src="videos/v_lesson5.mp4" controls></video></div>
    <p class="intro-text">ØªÙØ¹Ø¯ Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø¯Ø±Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©...</p>
    <div class="lesson-buttons">
      <a href="lessons/lesson5.pptx" download class="btn-blue">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>
      <iframe src="https://wayground.com/embed/quiz/69173f2c626a06f2bbb77153" frameborder="0"></iframe>
      <div class="progress-message"></div>
      <button class="btn-green complete-quiz-btn" data-lesson="5">âœ… Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      <button class="btn-green next-btn locked" data-lesson="5">Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
      <button class="btn-gray prev-btn" data-prev="4">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>

  <!-- ğŸ“š Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø³Ø§Ø¯Ø³ -->
  <div class="dashboard-container hidden lesson-section" id="lesson6Section">
    <h1>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø³Ø§Ø¯Ø³: ØªØ§Ø¨Ø¹ ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h1>
    <div class="video-section"><video src="videos/v_lesson6.mp4" controls></video></div>
    <p class="intro-text">ØªÙØ¹Ø¯ Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø¯Ø±Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©...</p>
    <div class="lesson-buttons">
      <a href="lessons/lesson6.pdf" download class="btn-blue">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>
      <iframe src="https://wayground.com/embed/quiz/691742919ea2d590cab1703a" frameborder="0"></iframe>
      <div class="progress-message"></div>
      <button class="btn-green complete-quiz-btn" data-lesson="6">âœ… Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      <button class="btn-green next-btn locked" data-lesson="6">Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
      <button class="btn-gray prev-btn" data-prev="5">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>

  <!-- ğŸ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ -->
  <div class="dashboard-container hidden lesson-section" id="finalExamSection">
    <h1>ğŸ¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„</h1>
    <p class="intro-text">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ. ÙŠØ¬Ø¨ Ø£Ù† ØªØ¬ÙŠØ¨ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±.</p>
    <div class="lesson-buttons">
      <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSe_4qhmIMkqVvmi_x_-g-_cs0m7N_Eu9auJnVOnyetBiDCgcA/viewform?usp=header" frameborder="0"></iframe>
      <div class="progress-message"></div>
      <button class="btn-green complete-quiz-btn" data-lesson="final">âœ… Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</button>
      <button class="btn-green next-btn locked" data-lesson="final">Ø¹Ø±Ø¶ Ø´Ù‡Ø§Ø¯ØªÙŠ ğŸ†</button>
      <button class="btn-gray prev-btn" data-prev="6">ğŸ”™ Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¯Ø±Ø³ Ø§Ù„Ø³Ø§Ø¯Ø³</button>
    </div>
  </div>

  <!-- âœ… Ù‚Ø³Ù… Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ± -->
  <div class="dashboard-container certificate-showcase hidden" id="certificateDisplay">
    <h1>ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯ØªÙƒ</h1>
    <div class="certificate-preview" id="certificatePreview"></div>
    <button class="download-cert-btn" onclick="downloadCertificate()">
      <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© ÙƒÙ€ PDF
    </button>
  </div>

  <script>
   document.addEventListener("DOMContentLoaded", () => {
    console.log("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ù†Ø¬Ø§Ø­");

    // ====== ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ======
    const currentUser = JSON.parse(localStorage.getItem('currentUser')) || {
        name: 'Ø·Ø§Ù„Ø¨ Ø¶ÙŠÙ',
        email: 'student@example.com'
    };

    document.getElementById('navbarUserName').textContent = `ğŸ‘¤ ${currentUser.name}`;

    // ====== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ‚Ø¯Ù… ======
    const initProgress = () => {
        return JSON.parse(localStorage.getItem('courseProgress')) || {
            currentLesson: 0,
            completedLessons: [],
            unlockedLessons: [1],
            totalLessons: 7,
            finalExamPassed: false,
            certificateGenerated: false
        };
    };

    let progress = initProgress();

    const updateProgressBar = () => {
        const completedCount = progress.completedLessons.length + (progress.finalExamPassed ? 1 : 0);
        const percentage = (completedCount / progress.totalLessons) * 100;

        const navbarFill = document.getElementById('navbarProgressFill');
        const navbarText = document.getElementById('navbarProgressText');
        if (navbarFill) navbarFill.style.width = percentage + '%';
        if (navbarText) navbarText.textContent = `${Math.round(percentage)}% (${completedCount}/${progress.totalLessons})`;
    };

    // ====== ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ======
    const updateUI = () => {
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…ÙØªÙˆØ­Ø©
        for (let i = 1; i <= 6; i++) {
            const lessonSection = document.getElementById(`lesson${i}Section`);
            if (progress.unlockedLessons.includes(i)) {
                lessonSection?.classList.remove('hidden');
            } else {
                lessonSection?.classList.add('hidden');
            }
        }

        // Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
        const finalExamSection = document.getElementById('finalExamSection');
        if (progress.completedLessons.length === 6) {
            finalExamSection?.classList.remove('hidden');
        } else {
            finalExamSection?.classList.add('hidden');
        }

        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ§Ù„ÙŠ ÙˆØ§Ù„Ù‚ÙÙ„
        document.querySelectorAll('.next-btn').forEach(btn => {
            const lessonNum = btn.dataset.lesson;
            const msgDiv = btn.parentElement.querySelector('.progress-message');

            if (lessonNum === 'final') {
                if (progress.finalExamPassed) {
                    btn.textContent = 'Ø¹Ø±Ø¶ Ø´Ù‡Ø§Ø¯ØªÙŠ ğŸ†';
                    btn.classList.remove('locked');
                    if (msgDiv) msgDiv.innerHTML = '<span style="color: #00e5ff;">âœ… Ø¬Ø§Ù‡Ø² Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</span>';
                } else {
                    btn.textContent = 'ğŸ”’ Ø£ÙƒÙ…Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹';
                    btn.classList.add('locked');
                    if (msgDiv) msgDiv.innerHTML = '<span style="color: #ffeb3b;">âš ï¸ ÙŠØ¬Ø¨ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø£ÙˆÙ„Ø§Ù‹</span>';
                }
            } else {
                const lessonNumber = parseInt(lessonNum);
                if (!progress.completedLessons.includes(lessonNumber)) {
                    btn.textContent = 'ğŸ”’ Ø£ÙƒÙ…Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹';
                    btn.classList.add('locked');
                    if (msgDiv) msgDiv.innerHTML = '<span style="color: #ffeb3b;">âš ï¸ ÙŠØ¬Ø¨ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹</span>';
                } else {
                    btn.textContent = lessonNumber === 6 ? 'Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ğŸ¯' : 'Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸';
                    btn.classList.remove('locked');
                    if (msgDiv) msgDiv.innerHTML = '<span style="color: #00e5ff;">âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„</span>';
                }
            }
        });
    };

    // ====== Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¯Ø±ÙˆØ³ ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ======
    document.querySelectorAll('.complete-quiz-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            const lessonNum = btn.dataset.lesson;
            if (lessonNum === 'final') {
                progress.finalExamPassed = true;
                alert('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­!');
            } else {
                const lessonNumber = parseInt(lessonNum);
                if (!progress.completedLessons.includes(lessonNumber)) {
                    progress.completedLessons.push(lessonNumber);
                    if (!progress.unlockedLessons.includes(lessonNumber + 1) && lessonNumber < 6) {
                        progress.unlockedLessons.push(lessonNumber + 1);
                    }
                }
                alert(`âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯Ø±Ø³ ${lessonNumber} Ø¨Ù†Ø¬Ø§Ø­!`);
            }
            localStorage.setItem('courseProgress', JSON.stringify(progress));
            updateUI();
            updateProgressBar();
        });
    });

    document.querySelectorAll('.next-btn, .prev-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            if (btn.classList.contains('locked')) return;

            const lessonNum = btn.dataset.lesson;
            const prevNum = btn.dataset.prev;

            if (lessonNum === 'final' && btn.textContent.includes('Ø¹Ø±Ø¶ Ø´Ù‡Ø§Ø¯ØªÙŠ')) {
                generateCertificatePreview();
                document.getElementById('certificateDisplay').classList.remove('hidden');
                document.getElementById('certificateDisplay').classList.add('active');
                document.getElementById('certificateDisplay').scrollIntoView({ behavior: "smooth" });
            } else if (lessonNum) {
                const nextNum = parseInt(lessonNum) + 1;
                if (nextNum <= 6) {
                    const nextSection = document.getElementById(`lesson${nextNum}Section`);
                    if (nextSection && progress.unlockedLessons.includes(nextNum)) {
                        nextSection.scrollIntoView({ behavior: "smooth" });
                    }
                } else if (nextNum === 7) {
                    document.getElementById('finalExamSection').scrollIntoView({ behavior: "smooth" });
                }
            } else if (prevNum) {
                if (prevNum === '0') {
                    document.getElementById('introSection')?.scrollIntoView({ behavior: "smooth" });
                } else {
                    document.getElementById(`lesson${prevNum}Section`)?.scrollIntoView({ behavior: "smooth" });
                }
            }
        });
    });

    // ====== Ø¹Ø±Ø¶ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© ======
    const generateCertificatePreview = () => {
        const previewDiv = document.getElementById('certificatePreview');
        const studentName = currentUser.name || 'Ø·Ø§Ù„Ø¨';
        const today = new Date().toLocaleDateString('ar-EG', {
            year: 'numeric', month: 'long', day: 'numeric'
        });

        previewDiv.innerHTML = `
            <div class="certificate">
                <h1>ğŸ† Ø´Ù‡Ø§Ø¯Ø© Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙˆØ±Ø©</h1>
                <p>ÙŠÙÙ…Ù†Ø­ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¥Ù„Ù‰</p>
                <h2>${studentName}</h2>
                <p>Ù„Ø¥ØªÙ…Ø§Ù…Ù‡ Ø¨Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</p>
                <h3>Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ ÙÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h3>
                <p>Ø¨ØªØ§Ø±ÙŠØ® ${today}</p>
            </div>
        `;
    };

    window.downloadCertificate = function() {
        const tempCertificate = document.createElement('div');
        tempCertificate.style.width = '1200px';
        tempCertificate.style.height = '850px';
        tempCertificate.style.position = 'absolute';
        tempCertificate.style.top = '-9999px';
        tempCertificate.style.left = '-9999px';
        tempCertificate.innerHTML = document.getElementById('certificatePreview').innerHTML;
        document.body.appendChild(tempCertificate);

        html2canvas(tempCertificate, { scale: 3 }).then(canvas => {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });
            const imgData = canvas.toDataURL('image/png');
            const imgWidth = 280;
            const imgHeight = (canvas.height * imgWidth) / canvas.width;
            pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
            const studentName = currentUser.name.replace(/\s+/g, '-');
            pdf.save(`Ø´Ù‡Ø§Ø¯Ø©-Ø§Ù„Ø£Ù…Ù†-Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ-${studentName}.pdf`);
            document.body.removeChild(tempCertificate);
            alert('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­!');
        }).catch(err => {
            console.error(err);
            document.body.removeChild(tempCertificate);
            alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©.');
        });
    };

    // ====== ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ======
    window.logout = function() {
        if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('courseProgress');
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        }
    };

    // ====== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ======
    updateUI();
    updateProgressBar();

    if (progress.currentLesson > 0) {
        setTimeout(() => {
            const targetSection = progress.currentLesson === 7 ? 
                document.getElementById('finalExamSection') :
                document.getElementById(`lesson${progress.currentLesson}Section`);
            targetSection?.scrollIntoView({ behavior: "smooth" });
        }, 500);
    }
});
  </script>
</body>
</html>